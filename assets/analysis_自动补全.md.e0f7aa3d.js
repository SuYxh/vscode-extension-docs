import{_ as e,c as a,o as t,Q as o}from"./chunks/framework.b5e70fdf.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"analysis/自动补全.md","lastUpdated":1708503635000}'),r={name:"analysis/自动补全.md"},i=o('<h2 id="自动补全" tabindex="-1">自动补全 <a class="header-anchor" href="#自动补全" aria-label="Permalink to &quot;自动补全&quot;">​</a></h2><blockquote><p>自动补全实现了对zz-ui组件、某个组件存在的属性、某个属性的可选值进行自动提示，同步zz-ui官网数据</p></blockquote><h2 id="整体流程" tabindex="-1">整体流程 <a class="header-anchor" href="#整体流程" aria-label="Permalink to &quot;整体流程&quot;">​</a></h2><p><img src="http://qn.huat.xyz/mac/20210925153249.png" alt=""></p><h2 id="核心api" tabindex="-1">核心API <a class="header-anchor" href="#核心api" aria-label="Permalink to &quot;核心API&quot;">​</a></h2><p>通过<code>vscode.languages.registerCompletionItemProvider</code>方法注册自动完成实现，接收3个参数：</p><ul><li>第一个是要关联的文件类型；</li><li>第二个是一个对象，里面必须包含<code>provideCompletionItems</code>和<code>resolveCompletionItem</code>这2个方法；</li><li>第三个是一个可选的触发提示的字符列表；</li></ul><p>参考：<a href="https://code.visualstudio.com/api/references/vscode-api#CompletionItemProvider" target="_blank" rel="noreferrer">https://code.visualstudio.com/api/references/vscode-api#CompletionItemProvider</a></p><p><strong>案例演示</strong></p><h2 id="组件自动提示" tabindex="-1">组件自动提示 <a class="header-anchor" href="#组件自动提示" aria-label="Permalink to &quot;组件自动提示&quot;">​</a></h2><p><img src="http://qn.huat.xyz/mac/20210924095002.png" alt=""></p><p><strong>提示的内容是怎么出来的？</strong></p><p>就是<code>provideCompletionItems</code>方法返回的数组！</p><h3 id="具体实现" tabindex="-1">具体实现 <a class="header-anchor" href="#具体实现" aria-label="Permalink to &quot;具体实现&quot;">​</a></h3><p>1、 <code>isTagStart()</code></p><p>通过正则进行匹配，其中使用了一个工具方法获取光标之前的输入内容，<code>getTextBeforePosition()</code> ,</p><p>正则：<code>tagStartReg: RegExp = /&lt;([\\w-]*)$/;</code></p><p>2、 <code>notInTemplate()</code> 获取当前光标所在行，并逐渐递减，判断是否能匹配到 <code>script</code> 标签 ，从而判断是否在 模板中 。</p><p>3、<code>getTagSuggestion()</code> 调用 <code>buildTagSuggestion()</code> 函数生成item，填充数组，并返回。 【这遍历的是对象】</p><p>4、<code>buildTagSuggestion(tag, TAGS[tag], id)</code> 核心函数</p><p><img src="http://qn.huat.xyz/mac/20210924150016.png" alt=""></p><h2 id="组件属性自动提示" tabindex="-1">组件属性自动提示 <a class="header-anchor" href="#组件属性自动提示" aria-label="Permalink to &quot;组件属性自动提示&quot;">​</a></h2><p>可根据流程图自行查看</p><p><img src="http://qn.huat.xyz/mac/20210925154400.png" alt=""></p><p>图上演示的是 <code>z-cell</code> 组件所存在的属性和属性相关的信息展示</p><h2 id="组件属性值自动提示" tabindex="-1">组件属性值自动提示 <a class="header-anchor" href="#组件属性值自动提示" aria-label="Permalink to &quot;组件属性值自动提示&quot;">​</a></h2><p>可根据流程图自行查看</p><p><img src="http://qn.huat.xyz/mac/20210925154624.png" alt=""></p><p>图上演示的是 <code>z-button</code> 组件 <code>type</code> 属性所存在的可选的属性值，并不是所有属性都存在可选值。</p>',29),c=[i];function p(d,n,l,s,h,m){return t(),a("div",null,c)}const _=e(r,[["render",p]]);export{g as __pageData,_ as default};
